# Remove current venv and recreate
rm -rf .venv
uv venv --python 3.13
source .venv/bin/activate

# Install packages in order, forcing newer versions
uv pip install torch torchaudio numpy scipy

# Try forcing newer librosa that might have Python 3.13 support
uv pip install "librosa>=0.10.2"

# If that fails, try the latest development version
uv pip install --pre librosa

# Continue with other packages
uv pip install soundfile pydub onnxruntime onnx julius ml_collections matplotlib seaborn plotly rich tqdm requests aiohttp pandas pyyaml python-dotenv click

# Install demucs last (sometimes problematic)
uv pip install demucs